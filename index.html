<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>数字タッチゲーム</title>
    <style>
      #board > input {
          width: 40px;
          margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <h1>小さい数字からタッチ</h1>
    <p>Time: <span id="time">0.0</span> sec.</p>
    <div id="board">
      <input type="button" id="button_0" value="?" onclick="touched(0);">
      <input type="button" id="button_1" value="?" onclick="touched(1);">
      <input type="button" id="button_2" value="?" onclick="touched(2);"><br>
      <input type="button" id="button_3" value="?" onclick="touched(3);">
      <input type="button" id="button_4" value="?" onclick="touched(4);">
      <input type="button" id="button_5" value="?" onclick="touched(5);"><br>
      <input type="button" id="button_6" value="?" onclick="touched(6);">
      <input type="button" id="button_7" value="?" onclick="touched(7);">
      <input type="button" id="button_8" value="?" onclick="touched(8);">
    </div>

    <p><input type="button" value="start!" onclick="timerStart();"></p>

    <script>
      var currentNum;
      var timer;
      var startTIme;

      function timerStart() {
        initBoard();
        currentNum = 0;
        startTIme = (new Date()).getTime();
        runTimer();

      }

      function initBoard(){
        var nums = [];
        var num;
        for(var i = 0; i < 9; i++){
          nums.push(i);
        }
        for(var i = 0; i<9; i++){
          num = nums.splice(Math.floor(Math.random() * nums.length), 1);
          document.getElementById('button_' + i).value = num[0];
        }
      }

      function touched(i){
        var btn = document.getElementById('button_' + i);
        if (btn.value == currentNum){
          btn.disabled = true;
          currentNum++;
        }
      }

      function runTimer(){
        document.getElementById('time').innerHTML = (((new Date()).getTime() - startTIme) / 1000).toFixed(1);
        timer = setTimeout(function() {
          runTimer();
        }, 100);
      }
    </script>

  </body>
</html>
